extends ../layouts/commons.pug
block content
  .container(style='margin-top: 170px')
    .card(style="background-color: rgba(158, 158, 158, 0.1);").labelColor
      .card-body
        form(action="/users/changeuser", method="POST").was-validated
          p.h4.text-center.py-4 Sửa tài khoản
          if errors
            each error in errors
              .alert.alert-danger
                span.closebtn(onclick="this.parentElement.style.display='none';") &times;
                = error  
          div.form-group
            label(for="magvchange") Họ và tên giảng viên cần thay đổi:
            select(name="magvchange", id="mySelect", onchange="infoUser()").form-control.mb-2.mr-sm-2.custom-select
              option(value=" ") Chọn...
              each user in users  
                option(value= user.magv + "-" + user.tengv + "-" + user.email + "-" + user.sdt)= user.tengv
          .form-group.form-inline
            label.font-weight-light(for="magv").mr-2 Mã giảng viên:
            input.form-control(type="text", name="magv", required, readonly="true")#magv
          .md-form
            i.fa.fa-user.prefix
            input.form-control(type="text", name="tengv",value=values ? values.tengv : "", required, placeholder="Họ tên")#tengv
            label.font-weight-light(for="tengv") Họ và tên giảng viên:
          .md-form
            .row
              .col-3
                i.fa.fa-envelope.prefix
                input.form-control(type="text", name="email",value=values ? values.email : "", required, placeholder="Email")#email
                label.font-weight-light(for="email") &nbsp; &nbsp; Email:
              .col
                input.form-control(type='text', disabled='')
                label.disabled(for='inputDisabledEx') @tvu.edu.vn          
          .md-form
            i.fa.fa-phone.prefix
            input.form-control(type="text", name="sdt",value=values ? values.sdt : "", required, placeholder="Số điện thoại")#sdt
            label.font-weight-light(for="sdt") Số điện thoại:
          .md-form
            i.fa.fa-lock.prefix
            input.form-control(type="password", name="password", required)
            label.font-weight-light(for="password") Mật khẩu:
          .md-form
            i.fa.fa-lock.prefix
            input.form-control(type="password", name="passwordConf", required)
            label.font-weight-light(for="passwordConf") Xác nhận mật khẩu:
          .form-row.mt-2  
            .col
              label(for="knmabm") Tên bộ môn:
              select(name="knmabm").form-control.mb-2.mr-sm-2.custom-select
                if bomon
                  each bomons in bomon
                    option(value= bomons.mabm)= bomons.tenbm      
            .col
              label(for="role") Vai Trò:
              select(name="role").form-control.custom-select
                option(value="Giảng viên") Giảng viên
                option(value="Lãnh đạo khoa") Lãnh đạo khoa
          button.btn.btn-primary.mt-2 Xác nhận
    #demo     
  script(src='https://code.jquery.com/jquery-3.3.1.js')  
  script.
    function infoUser(){
      var x = document.getElementById("mySelect").value;
      var values = x.split('-');
      var vlEmail = values[2].split("@");
      document.getElementById("magv").value = values[0];
      document.getElementById("tengv").value = values[1];
      document.getElementById("email").value = vlEmail[0];
      document.getElementById("sdt").value = values[3];
    }
    